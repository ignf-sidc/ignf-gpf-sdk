
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../tutoriel_3_flux_raster/">
      
      
        <link rel="next" href="../reference/auth/">
      
      
      <link rel="icon" href="../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.11">
    
    
      
        <title>Tutoriel PCRS - Documentation SDK Entrepôt</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/css/extra.css">
    
      <link rel="stylesheet" href="../assets/css/neoteroi.css">
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="custom">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutoriel-publier-un-flux-pcrs" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="https://www.ign.fr/geoplateforme" title="Documentation SDK Entrepôt" class="md-header__button md-logo" aria-label="Documentation SDK Entrepôt" data-md-component="logo">
      
  <img src="../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation SDK Entrepôt
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutoriel PCRS
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Geoplateforme/sdk_entrepot" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Geoplateforme/sdk_entrepot
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.ign.fr/geoplateforme" title="Documentation SDK Entrepôt" class="md-nav__button md-logo" aria-label="Documentation SDK Entrepôt" data-md-component="logo">
      
  <img src="../assets/images/logo.png" alt="logo">

    </a>
    Documentation SDK Entrepôt
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Geoplateforme/sdk_entrepot" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Geoplateforme/sdk_entrepot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="https://geoplateforme.github.io" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accueil Géoplateforme
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../configuration_details/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration details
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../comme-executable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comme executable
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../comme-module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comme module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../upload_descriptor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upload descriptor
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../resolveurs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resolveurs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" checked>
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutoriels
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Tutoriels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tutoriel_1_archive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutoriel 1 : publier une archive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tutoriel_2_flux_vecteur/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutoriel 2 : publier un flux vecteur
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tutoriel_3_flux_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutoriel 3 : publier un flux raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tutoriel PCRS
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tutoriel PCRS
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition-de-la-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Définition de la configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fichier-descripteur-de-livraison" class="md-nav__link">
    <span class="md-ellipsis">
      Fichier descripteur de livraison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suppression-de-la-livraison" class="md-nav__link">
    <span class="md-ellipsis">
      Suppression de la livraison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nettoyage-de-fin-dexperimentation" class="md-nav__link">
    <span class="md-ellipsis">
      Nettoyage de fin d'expérimentation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Références
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Références
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk_entrepot_gpf.auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk_entrepot_gpf.io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/store/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk_entrepot_gpf.store
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk_entrepot_gpf.workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/workflow/action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk_entrepot_gpf.workflow.action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/workflow/resolver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk_entrepot_gpf.workflow.resolver
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition-de-la-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Définition de la configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fichier-descripteur-de-livraison" class="md-nav__link">
    <span class="md-ellipsis">
      Fichier descripteur de livraison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suppression-de-la-livraison" class="md-nav__link">
    <span class="md-ellipsis">
      Suppression de la livraison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nettoyage-de-fin-dexperimentation" class="md-nav__link">
    <span class="md-ellipsis">
      Nettoyage de fin d'expérimentation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<!--
CE DOCUMENT N'A PAS VOCATION A ÊTRE LU DIRECTEMENT OU VIA GITHUB :
les liens seront cassés, l'affichage ne sera pas correcte. Ne faites ça !

Consultez la doc en ligne ici : https://geoplateforme.github.io/sdk-entrepot/

Le lien vers cette page devrait être : https://geoplateforme.github.io/sdk-entrepot/tutoriel_pcrs/
-->

<h1 id="tutoriel-publier-un-flux-pcrs">Tutoriel : publier un flux PCRS<a class="headerlink" href="#tutoriel-publier-un-flux-pcrs" title="Permanent link">#</a></h1>
<p>La Géoplateforme permet d'héberger et diffuser vos données PCRS raster/image (Plan Corps de Rue Simplifié).</p>
<p>Pour cela, vous devez téléverser des dalles « PCRS » qui permettront de créer une pyramide image qui sera diffusée en flux.</p>
<p>Voici les prérequis pour suivre ce tutoriel :</p>
<ul>
<li>vous devez disposer d'un compte Géoplateforme (création en suivant ce <a href="https://geoplateforme.github.io/tutoriels/production/controle-des-acces/entrepot/creation_compte/">tuto</a> ou sur <a href="https://cartes.gouv.fr/">cartes.gouv</a>)</li>
<li>vous devez disposer d'un datastore (pour sa création, vous pouvez contacter geoplateforme@ign.fr ou faire une demande <a href="https://cartes.gouv.fr/entrepot/demande-de-creation">ici</a> en précisant votre établissement, qu'il s'agit d'une diffusion partenaire PCRS et votre identifiant utilisateur que vous trouver sur votre <a href="https://cartes.gouv.fr/mon-compte">espace</a>)</li>
<li>vous devez avoir installé python et le module <a href="../">SDK</a></li>
</ul>
<p>Vous allez avoir besoin de 3 fichiers pour réaliser le tutoriel dont le contenu va être détaillé :</p>
<ul>
<li>un fichier de configuration pour définir vos paramètres SDK</li>
<li>un fichier descripteur qui détaille votre livraison</li>
<li>un fichier de workflow en plusieurs étapes qui effectuera les traitements</li>
</ul>
<h2 id="definition-de-la-configuration">Définition de la configuration<a class="headerlink" href="#definition-de-la-configuration" title="Permanent link">#</a></h2>
<p>Vous allez devoir déposer à la racine du dossier de votre projet un fichier <code>config.ini</code> contenant les informations suivantes :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># Informations pour l&#39;authentification
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>[store_authentification]
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a># paramètres du SDK
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>client_id=gpf-warehouse
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>client_secret=BK2G7Vvkn7UDc8cV7edbCnHdYminWVw2
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a># Votre login
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>login=********
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a># Votre mot de passe
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>password=********
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a># Informations pour l&#39;API
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>[store_api]
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a># L&#39;identifiant de votre datastore
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>datastore=********
</code></pre></div>
<p>Il faut compléter le fichier avec votre login/mot de passe et l'identifiant du datastore qui vous a été aloué.</p>
<p>Vous pouvez tester la validité de votre fichier avec la commande suivante :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>python3 -m sdk_entrepot_gpf me
</code></pre></div>
<p>Cela devrait renvoyer :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Vos informations :
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>  * email : ********
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  * nom : ********
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>  * votre id : ********
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>Vous êtes membre de 1 communauté(s) :
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>  * communauté « ******** » :
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>      - id de la communauté : ********
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>      - id du datastore : ********
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>      - nom technique : ********
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>      - droits : community, uploads, processings, datastore, stored_data, broadcast
</code></pre></div>
<p>Il peut être nécessaire de rajouter certains paramètres pour que cela fonctionne comme le proxy si vous en utilisez un. Vous pouvez suivre la page <a href="../configuration/">configuration</a> pour compléter votre fichier si nécessaire.</p>
<h2 id="fichier-descripteur-de-livraison">Fichier descripteur de livraison<a class="headerlink" href="#fichier-descripteur-de-livraison" title="Permanent link">#</a></h2>
<p>Vous allez devoir créer un fichier <code>PCRS_descriptor.jsonc</code> à la racine de votre projet avec les informations suivantes :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>{
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    &quot;datasets&quot;: [
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>        {
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>            &quot;data_dirs&quot;: [
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>                &quot;$votre_chantier_PCRS&quot;
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>            ],
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>            &quot;upload_infos&quot;: {
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>                &quot;description&quot;: &quot;Description de votre chantier (département, zone, date...)&quot;,
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>                &quot;name&quot;: &quot;$votre_chantier_PCRS&quot;,
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>                &quot;srs&quot;: &quot;EPSG:2154&quot;,
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>                &quot;type&quot;: &quot;RASTER&quot;
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>            },
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>            &quot;comments&quot;: [
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>                &quot;Votre commentaire&quot;
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>            ],
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>            &quot;tags&quot;: {
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>                &quot;datasheet_name&quot;: &quot;$votre_chantier_PCRS&quot;,
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>                &quot;type&quot;: &quot;PCRS&quot;
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>            }
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>        }
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>    ]
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>}
</code></pre></div>
<p>Il faut remplacer 3 fois dans le fichier <code>$votre_chantier_PCRS</code> par une valeur sous la forme <code>PCRS_chantier_********</code> (ex: PCRS_chantier_D046_2022). Cette valeur vous permettra de retrouver votre fiche de données sur cartes.gouv.fr. Vous pouvez également compléter le fichier avec une description et éventuellement un commentaire.</p>
<p><em><strong>ATTENTION</strong> Si vous utilisez le jeu de données test pour l'expérimentation, la valeur <code>$votre_chantier_PCRS</code> est également utilisée pour définir le nom des couches. Comme il y a unicité de nom pour les couches sur les services publics, nous vous encourageons à enrichir cette valeur pour qu'elle soit différente d'un testeur à l'autre (ex: PCRS_chantier_D046_2022_test_PACA).</em></p>
<p>Vous déposerez vos données dans un répertoire du même nom <code>$votre_chantier_PCRS</code> à la racine de votre projet comme suit :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$votre_chantier_PCRS/
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>├── dalle_1.tif
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>├── dalle_2.tif
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>└── ...
</code></pre></div>
<p>Vous pouvez maintenant effectuer la livraison en lançant la commande depuis la racine de votre projet ou en indiquant le chemin du fichier descripteur au programme :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>delivery<span class="w"> </span>PCRS_descriptor.jsonc
</code></pre></div>
<p>Le programme doit vous indiquer que le transfert est en cours, puis qu'il attend la fin des vérification côté API avant de conclure que tout est bon <code>INFO - BILAN : les 1 livraisons se sont bien passées</code> (cela peut être long selon la taille de la livraison et la qualité de votre connexion, ne fermez pas votre terminal pendant ce temps).</p>
<p>Si votre connexion est interrompue, vous pouver reprendre la livraison avec la commande :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>delivery<span class="w"> </span>PCRS_descriptor.jsonc<span class="w"> </span>-b<span class="w"> </span>CONTINUE
</code></pre></div>
<p>Il y a deux vérifications effectuées sur la livraison :</p>
<ul>
<li>la vérification standard qui s'assure que les données ne sont pas corrompues lors du transfert</li>
<li>la vérification raster qui s'assure que les données sont valides</li>
</ul>
<p>Si une des deux vérification échoue, vous pourrez obtenir les logs d'erreur détaillés en indiquant l'id de votre livraison dans la commande :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>upload<span class="w"> </span>********<span class="w"> </span>--checks
</code></pre></div>
<h2 id="workflow">Workflow<a class="headerlink" href="#workflow" title="Permanent link">#</a></h2>
<p>Une fois les données livrées, il faut créer la pyramide image avant de la diffuser en flux (WMSRaster et WMTS).</p>
<p>Ces étapes sont décrites grâces à un workflow.</p>
<p>Vous pouvez récupérer le template du workflow grâce à la commande suivante :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>example<span class="w"> </span>workflow<span class="w"> </span>PCRS.jsonc
</code></pre></div>
<p>Pour plus de détails, consultez la <a href="../workflow/">documentation sur les workflows</a>.</p>
<p>Le workflow <code>PCRS.jsonc</code> est composé de 2 étapes (une pour la génération de la pyramide et une pour la publication des flux). Il faudra lancer une commande pour chacune d'elles.</p>
<p>Les commandes à lancer sont les suivantes :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># partie génération de la pyramide</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>workflow<span class="w"> </span>-f<span class="w"> </span>PCRS.jsonc<span class="w"> </span>-s<span class="w"> </span>pyramide<span class="w"> </span>--param<span class="w"> </span>producteur<span class="w"> </span><span class="nv">$votre_chantier_PCRS</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># partie publication</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>workflow<span class="w"> </span>-f<span class="w"> </span>PCRS.jsonc<span class="w"> </span>-s<span class="w"> </span>publication<span class="w"> </span>--param<span class="w"> </span>producteur<span class="w"> </span><span class="nv">$votre_chantier_PCRS</span>
</code></pre></div>
<p>La première commande peut être longue selon le nombre de dalles livrées. Des logs doivent vous être remontés et se terminer par :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>INFO - Exécution de l&#39;action &#39;pyramide-0&#39; : terminée
</code></pre></div>
<p>Avec la deuxième commande, deux offres (une WMTS et une WMSRaster) devraient être créées :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>INFO - Offre créée : Offering(id=********, layer_name=$votre_chantier_PCRS)
</code></pre></div>
<p>Vous pouvez maintenant retrouver vos données dans cartes.gouv (https://cartes.gouv.fr/entrepot/$id_datastore/donnees/$votre_chantier_PCRS) ou les visionner dans un SIG comme QGIS en renseignant les urls des GetCapabilities des services (<a href="https://data.geopf.fr/wmts?service=WMTS&amp;request=GetCapabilities">WMTS</a> et <a href="https://data.geopf.fr/wms-r?">WMSRaster</a>).</p>
<h2 id="suppression-de-la-livraison">Suppression de la livraison<a class="headerlink" href="#suppression-de-la-livraison" title="Permanent link">#</a></h2>
<p>Afin de ne pas surcharger l'espace de livraison et de ne pas atteindre vos quotas lors de livraisons ultérieures, une fois que vous avez validez vos flux, vous pouvez supprimer la livraison avec la commande suivante :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>workflow<span class="w"> </span>-f<span class="w"> </span>PCRS.jsonc<span class="w"> </span>-s<span class="w"> </span>upload_delete<span class="w"> </span>--param<span class="w"> </span>producteur<span class="w"> </span><span class="nv">$votre_chantier_PCRS</span>
</code></pre></div>
<p>Le programme doit vous indiquer que la suppression s'est bien passée <code>INFO - Suppression effectuée.</code>.</p>
<h2 id="nettoyage-de-fin-dexperimentation">Nettoyage de fin d'expérimentation<a class="headerlink" href="#nettoyage-de-fin-dexperimentation" title="Permanent link">#</a></h2>
<p>Dans le cadre de l'utilisation du jeu de données test pour l'expérimentation, vous pouvez dépublier vos couches et supprimer la pyramide avec la commande suivante :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>sdk_entrepot_gpf<span class="w"> </span>workflow<span class="w"> </span>-f<span class="w"> </span>PCRS.jsonc<span class="w"> </span>-s<span class="w"> </span>depublication<span class="w"> </span>--param<span class="w"> </span>producteur<span class="w"> </span><span class="nv">$votre_chantier_PCRS</span>
</code></pre></div>
<p>Le programme va vous demander de confirmer les entités à supprimer <code>INFO - Voulez-vous effectuer la suppression ? (oui/NON)</code>, vous allez devoir répondre <code>oui</code> si les entités listées en vert au-dessus correspondent bien à celles à supprimer.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>